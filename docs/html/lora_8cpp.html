<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pluviometro: src/lora.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Pluviometro
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('lora_8cpp.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">lora.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="lora_8h_source.html">lora.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="main_8h_source.html">main.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_s_d__adp_8h_source.html">SD_adp.h</a>&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad00e5aa32f425c7cf5b551edbe4e2018" id="r_ad00e5aa32f425c7cf5b551edbe4e2018"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad00e5aa32f425c7cf5b551edbe4e2018">os_getArtEui</a> (u1_t *buf)</td></tr>
<tr class="separator:ad00e5aa32f425c7cf5b551edbe4e2018"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59f8459c9afe001b9d082b88f24bbc06" id="r_a59f8459c9afe001b9d082b88f24bbc06"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a59f8459c9afe001b9d082b88f24bbc06">os_getDevEui</a> (u1_t *buf)</td></tr>
<tr class="separator:a59f8459c9afe001b9d082b88f24bbc06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a876d512ca10c7f577c86f5dc1894bc49" id="r_a876d512ca10c7f577c86f5dc1894bc49"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a876d512ca10c7f577c86f5dc1894bc49">os_getDevKey</a> (u1_t *buf)</td></tr>
<tr class="separator:a876d512ca10c7f577c86f5dc1894bc49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70f58dcb5b0adb04adcb7cb1115d4f99" id="r_a70f58dcb5b0adb04adcb7cb1115d4f99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a70f58dcb5b0adb04adcb7cb1115d4f99">loraWAN_config_and_transmition</a> ()</td></tr>
<tr class="memdesc:a70f58dcb5b0adb04adcb7cb1115d4f99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures and initiates the LoRaWAN transmission.  <br /></td></tr>
<tr class="separator:a70f58dcb5b0adb04adcb7cb1115d4f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab42efec0e8860ab768280a3d778b4c0e" id="r_ab42efec0e8860ab768280a3d778b4c0e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab42efec0e8860ab768280a3d778b4c0e">do_send</a> (osjob_t *j)</td></tr>
<tr class="memdesc:ab42efec0e8860ab768280a3d778b4c0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends data using the LoRaWAN protocol.  <br /></td></tr>
<tr class="separator:ab42efec0e8860ab768280a3d778b4c0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaead836f5e0f65f5906b7ce269e92436" id="r_aaead836f5e0f65f5906b7ce269e92436"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaead836f5e0f65f5906b7ce269e92436">onEvent</a> (ev_t ev)</td></tr>
<tr class="memdesc:aaead836f5e0f65f5906b7ce269e92436"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event handler for LoRa events.  <br /></td></tr>
<tr class="separator:aaead836f5e0f65f5906b7ce269e92436"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a518c053fc83e3afad95a7eb888108e66" id="r_a518c053fc83e3afad95a7eb888108e66"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a518c053fc83e3afad95a7eb888108e66">sendDataFromFile</a> (const char *filename)</td></tr>
<tr class="memdesc:a518c053fc83e3afad95a7eb888108e66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends data from a specified file over LoRa.  <br /></td></tr>
<tr class="separator:a518c053fc83e3afad95a7eb888108e66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86bc61487b3cb470dab5c850ac501b2d" id="r_a86bc61487b3cb470dab5c850ac501b2d"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a86bc61487b3cb470dab5c850ac501b2d">Lineprocessing</a> (const String &amp;line, uint8_t *data, float avrg_temp)</td></tr>
<tr class="memdesc:a86bc61487b3cb470dab5c850ac501b2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes a line of data and converts it into a binary format.  <br /></td></tr>
<tr class="separator:a86bc61487b3cb470dab5c850ac501b2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b87e6c24b58790f84babe4f50e2cf48" id="r_a8b87e6c24b58790f84babe4f50e2cf48"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8b87e6c24b58790f84babe4f50e2cf48">saveLastPosition</a> (unsigned long position)</td></tr>
<tr class="memdesc:a8b87e6c24b58790f84babe4f50e2cf48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves the last position to persistent storage.  <br /></td></tr>
<tr class="separator:a8b87e6c24b58790f84babe4f50e2cf48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7595540527b820ae0c64023481d60c8" id="r_ad7595540527b820ae0c64023481d60c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad7595540527b820ae0c64023481d60c8">readLastPosition</a> ()</td></tr>
<tr class="memdesc:ad7595540527b820ae0c64023481d60c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the last saved position from preferences.  <br /></td></tr>
<tr class="separator:ad7595540527b820ae0c64023481d60c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa77586c54009a37ee5ea1b088db21fe1" id="r_aa77586c54009a37ee5ea1b088db21fe1"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa77586c54009a37ee5ea1b088db21fe1">data_processing</a> (const char *filename, uint8_t *data)</td></tr>
<tr class="memdesc:aa77586c54009a37ee5ea1b088db21fe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes data from a file and calculates the average temperature.  <br /></td></tr>
<tr class="separator:aa77586c54009a37ee5ea1b088db21fe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a48aaa6046ac1d9b5b7172f7be7a6f7e1" id="r_a48aaa6046ac1d9b5b7172f7be7a6f7e1"><td class="memItemLeft" align="right" valign="top">const unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a48aaa6046ac1d9b5b7172f7be7a6f7e1">TX_INTERVAL</a> = 30</td></tr>
<tr class="separator:a48aaa6046ac1d9b5b7172f7be7a6f7e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82b2c57ed09941537a4e8bf84b35a5eb" id="r_a82b2c57ed09941537a4e8bf84b35a5eb"><td class="memItemLeft" align="right" valign="top">const lmic_pinmap&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a82b2c57ed09941537a4e8bf84b35a5eb">lmic_pins</a></td></tr>
<tr class="separator:a82b2c57ed09941537a4e8bf84b35a5eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae896ade8de020eddf38adba829f22445" id="r_ae896ade8de020eddf38adba829f22445"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae896ade8de020eddf38adba829f22445">loraWANActive</a> = false</td></tr>
<tr class="separator:ae896ade8de020eddf38adba829f22445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4deb953346a0b30864d5a84815bd99c2" id="r_a4deb953346a0b30864d5a84815bd99c2"><td class="memItemLeft" align="right" valign="top">int RTC_DATA_ATTR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4deb953346a0b30864d5a84815bd99c2">last_line</a> = 0</td></tr>
<tr class="separator:a4deb953346a0b30864d5a84815bd99c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa77586c54009a37ee5ea1b088db21fe1" name="aa77586c54009a37ee5ea1b088db21fe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa77586c54009a37ee5ea1b088db21fe1">&#9670;&#160;</a></span>data_processing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t data_processing </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes data from a file and calculates the average temperature. </p>
<p>This function reads data from the specified file starting from the last read position, calculates the average temperature from the data, and processes the last line of data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The name of the file to read data from. </td></tr>
    <tr><td class="paramname">data</td><td>A pointer to a buffer where processed data will be stored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The size of the processed data. </dd></dl>

</div>
</div>
<a id="ab42efec0e8860ab768280a3d778b4c0e" name="ab42efec0e8860ab768280a3d778b4c0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab42efec0e8860ab768280a3d778b4c0e">&#9670;&#160;</a></span>do_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_send </td>
          <td>(</td>
          <td class="paramtype">osjob_t *</td>          <td class="paramname"><span class="paramname"><em>j</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends data using the LoRaWAN protocol. </p>
<p>This function checks if there is a current TX/RX job running. If there is no ongoing transmission or reception, it prepares an upstream data transmission at the next possible time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">j</td><td>Pointer to the osjob_t structure representing the job to be executed.</td></tr>
  </table>
  </dd>
</dl>
<p>The function performs the following actions:</p><ul>
<li>If a TX/RX job is currently running, it logs a message indicating that the transmission is pending and does not send data.</li>
<li>If no TX/RX job is running, it queues a packet for transmission and logs a message indicating that the packet has been queued.</li>
</ul>
<p>The next transmission is scheduled after the TX_COMPLETE event. </p>

</div>
</div>
<a id="a86bc61487b3cb470dab5c850ac501b2d" name="a86bc61487b3cb470dab5c850ac501b2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86bc61487b3cb470dab5c850ac501b2d">&#9670;&#160;</a></span>Lineprocessing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t Lineprocessing </td>
          <td>(</td>
          <td class="paramtype">const String &amp;</td>          <td class="paramname"><span class="paramname"><em>line</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>avrg_temp</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes a line of data and converts it into a binary format. </p>
<p>This function takes a line of data in the form of a string, parses it to extract temperature, rainfall, date, time, and ID information, and then converts these values into a binary format stored in the provided data array.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">line</td><td>The input string containing the data to be processed. </td></tr>
    <tr><td class="paramname">data</td><td>A pointer to the array where the binary data will be stored. </td></tr>
    <tr><td class="paramname">avrg_temp</td><td>The average temperature to be used in the processing. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes written to the data array. </dd></dl>

</div>
</div>
<a id="a70f58dcb5b0adb04adcb7cb1115d4f99" name="a70f58dcb5b0adb04adcb7cb1115d4f99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70f58dcb5b0adb04adcb7cb1115d4f99">&#9670;&#160;</a></span>loraWAN_config_and_transmition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loraWAN_config_and_transmition </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures and initiates the LoRaWAN transmission. </p>
<p>This function initializes the LoRaWAN stack, sets up the session keys, configures the channels, and sends data from a specified file.</p>
<dl class="section note"><dt>Note</dt><dd>The debug print statements are included for development purposes and should be removed in the final version.</dd></dl>
<p>The function performs the following steps:</p><ul>
<li>Initializes the LoRaWAN stack.</li>
<li>Resets the LMIC (LoRaMAC-in-C) library.</li>
<li>Sets up the session keys for communication.</li>
<li>Configures the channels based on the region (e.g., CFG_au915).</li>
<li>Disables link check mode.</li>
<li>Sets the data rate and transmission power.</li>
<li>Sends data from the specified file.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

</div>
</div>
<a id="aaead836f5e0f65f5906b7ce269e92436" name="aaead836f5e0f65f5906b7ce269e92436"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaead836f5e0f65f5906b7ce269e92436">&#9670;&#160;</a></span>onEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void onEvent </td>
          <td>(</td>
          <td class="paramtype">ev_t</td>          <td class="paramname"><span class="paramname"><em>ev</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Event handler for LoRa events. </p>
<p>This function is called whenever a LoRa event occurs. It prints the event time and type to the serial monitor and handles specific events accordingly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ev</td><td>The event type (ev_t) that occurred.</td></tr>
  </table>
  </dd>
</dl>
<p>Event types handled:</p><ul>
<li>EV_TXSTART: Transmission started.</li>
<li>EV_SCAN_TIMEOUT: Scan timed out.</li>
<li>EV_BEACON_FOUND: Beacon found.</li>
<li>EV_BEACON_MISSED: Beacon missed.</li>
<li>EV_BEACON_TRACKED: Beacon tracked.</li>
<li>EV_JOINING: Joining network.</li>
<li>EV_JOINED: Joined network.</li>
<li>EV_RFU1: Reserved for future use.</li>
<li>EV_JOIN_FAILED: Joining network failed.</li>
<li>EV_REJOIN_FAILED: Rejoining network failed.</li>
<li>EV_TXCOMPLETE: Transmission complete (includes waiting for RX windows).</li>
<li>EV_LOST_TSYNC: Lost time synchronization.</li>
<li>EV_RESET: Reset event.</li>
<li>EV_RXCOMPLETE: Data received in ping slot.</li>
<li>EV_LINK_DEAD: Link dead.</li>
<li>EV_LINK_ALIVE: Link alive.</li>
<li>Default: Unknown event. </li>
</ul>

</div>
</div>
<a id="ad00e5aa32f425c7cf5b551edbe4e2018" name="ad00e5aa32f425c7cf5b551edbe4e2018"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad00e5aa32f425c7cf5b551edbe4e2018">&#9670;&#160;</a></span>os_getArtEui()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_getArtEui </td>
          <td>(</td>
          <td class="paramtype">u1_t *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a59f8459c9afe001b9d082b88f24bbc06" name="a59f8459c9afe001b9d082b88f24bbc06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59f8459c9afe001b9d082b88f24bbc06">&#9670;&#160;</a></span>os_getDevEui()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_getDevEui </td>
          <td>(</td>
          <td class="paramtype">u1_t *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a876d512ca10c7f577c86f5dc1894bc49" name="a876d512ca10c7f577c86f5dc1894bc49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a876d512ca10c7f577c86f5dc1894bc49">&#9670;&#160;</a></span>os_getDevKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_getDevKey </td>
          <td>(</td>
          <td class="paramtype">u1_t *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad7595540527b820ae0c64023481d60c8" name="ad7595540527b820ae0c64023481d60c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7595540527b820ae0c64023481d60c8">&#9670;&#160;</a></span>readLastPosition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void readLastPosition </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the last saved position from preferences. </p>
<p>This function initializes the preferences with the namespace "last_line" and retrieves the integer value associated with the key "last_line". If the key does not exist, it defaults to 0. </p>

</div>
</div>
<a id="a8b87e6c24b58790f84babe4f50e2cf48" name="a8b87e6c24b58790f84babe4f50e2cf48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b87e6c24b58790f84babe4f50e2cf48">&#9670;&#160;</a></span>saveLastPosition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void saveLastPosition </td>
          <td>(</td>
          <td class="paramtype">unsigned long</td>          <td class="paramname"><span class="paramname"><em>position</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves the last position to persistent storage. </p>
<p>This function stores the given position value in a persistent storage using the preferences API. The position is saved under the key "last_line".</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">position</td><td>The position value to be saved. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a518c053fc83e3afad95a7eb888108e66" name="a518c053fc83e3afad95a7eb888108e66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a518c053fc83e3afad95a7eb888108e66">&#9670;&#160;</a></span>sendDataFromFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendDataFromFile </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends data from a specified file over LoRa. </p>
<p>This function initializes the SD card, opens the specified file, and reads data from it. If the file has been read before, it seeks to the last read position. If the next character in the file is a newline, the function puts the device to sleep. Otherwise, it processes the data and sends it using LoRa. The function waits until the transmission is complete before returning.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The name of the file to read data from. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a4deb953346a0b30864d5a84815bd99c2" name="a4deb953346a0b30864d5a84815bd99c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4deb953346a0b30864d5a84815bd99c2">&#9670;&#160;</a></span>last_line</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int RTC_DATA_ATTR last_line = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a82b2c57ed09941537a4e8bf84b35a5eb" name="a82b2c57ed09941537a4e8bf84b35a5eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82b2c57ed09941537a4e8bf84b35a5eb">&#9670;&#160;</a></span>lmic_pins</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const lmic_pinmap lmic_pins</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .nss = <a class="code hl_define" href="lora_8h.html#a90e2250233b92babc91add8daf5e27b2">SX1276_NSS</a>,</div>
<div class="line">    .rxtx = LMIC_UNUSED_PIN,</div>
<div class="line">    .rst = <a class="code hl_define" href="lora_8h.html#ae3fdfec46955b03f05c8d7715dc41d79">SX1276_RST</a>,</div>
<div class="line">    .dio = {<a class="code hl_define" href="lora_8h.html#a839015d97f9441df848f67d41570cf90">SX1276_DIO0</a>, <a class="code hl_define" href="lora_8h.html#a1787bdfd224acaec2e10ddaf2b153b7a">SX1276_DIO1</a>, LMIC_UNUSED_PIN},</div>
<div class="line">}</div>
<div class="ttc" id="alora_8h_html_a1787bdfd224acaec2e10ddaf2b153b7a"><div class="ttname"><a href="lora_8h.html#a1787bdfd224acaec2e10ddaf2b153b7a">SX1276_DIO1</a></div><div class="ttdeci">#define SX1276_DIO1</div><div class="ttdef"><b>Definition</b> lora.h:16</div></div>
<div class="ttc" id="alora_8h_html_a839015d97f9441df848f67d41570cf90"><div class="ttname"><a href="lora_8h.html#a839015d97f9441df848f67d41570cf90">SX1276_DIO0</a></div><div class="ttdeci">#define SX1276_DIO0</div><div class="ttdef"><b>Definition</b> lora.h:15</div></div>
<div class="ttc" id="alora_8h_html_a90e2250233b92babc91add8daf5e27b2"><div class="ttname"><a href="lora_8h.html#a90e2250233b92babc91add8daf5e27b2">SX1276_NSS</a></div><div class="ttdeci">#define SX1276_NSS</div><div class="ttdef"><b>Definition</b> lora.h:13</div></div>
<div class="ttc" id="alora_8h_html_ae3fdfec46955b03f05c8d7715dc41d79"><div class="ttname"><a href="lora_8h.html#ae3fdfec46955b03f05c8d7715dc41d79">SX1276_RST</a></div><div class="ttdeci">#define SX1276_RST</div><div class="ttdef"><b>Definition</b> lora.h:14</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae896ade8de020eddf38adba829f22445" name="ae896ade8de020eddf38adba829f22445"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae896ade8de020eddf38adba829f22445">&#9670;&#160;</a></span>loraWANActive</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool loraWANActive = false</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a48aaa6046ac1d9b5b7172f7be7a6f7e1" name="a48aaa6046ac1d9b5b7172f7be7a6f7e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48aaa6046ac1d9b5b7172f7be7a6f7e1">&#9670;&#160;</a></span>TX_INTERVAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned TX_INTERVAL = 30</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="lora_8cpp.html">lora.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
