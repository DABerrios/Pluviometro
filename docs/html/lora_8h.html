<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pluviometro: include/lora.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Pluviometro
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('lora_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">lora.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;Arduino.h&gt;</code><br />
<code>#include &lt;lmic.h&gt;</code><br />
<code>#include &lt;hal/hal.h&gt;</code><br />
<code>#include &lt;SPI.h&gt;</code><br />
<code>#include &lt;SD.h&gt;</code><br />
<code>#include &lt;preferences.h&gt;</code><br />
</div>
<p><a href="lora_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1725019f88d51fe88d3708c63927939e" id="r_a1725019f88d51fe88d3708c63927939e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1725019f88d51fe88d3708c63927939e">SX1276_SCK</a>&#160;&#160;&#160;18</td></tr>
<tr class="separator:a1725019f88d51fe88d3708c63927939e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6269695994a5fab5a4d1690236bd39fb" id="r_a6269695994a5fab5a4d1690236bd39fb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6269695994a5fab5a4d1690236bd39fb">SX1276_MISO</a>&#160;&#160;&#160;19</td></tr>
<tr class="separator:a6269695994a5fab5a4d1690236bd39fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bc86392a25db464812400b2cda0bc63" id="r_a6bc86392a25db464812400b2cda0bc63"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6bc86392a25db464812400b2cda0bc63">SX1276_MOSI</a>&#160;&#160;&#160;23</td></tr>
<tr class="separator:a6bc86392a25db464812400b2cda0bc63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90e2250233b92babc91add8daf5e27b2" id="r_a90e2250233b92babc91add8daf5e27b2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a90e2250233b92babc91add8daf5e27b2">SX1276_NSS</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:a90e2250233b92babc91add8daf5e27b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3fdfec46955b03f05c8d7715dc41d79" id="r_ae3fdfec46955b03f05c8d7715dc41d79"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae3fdfec46955b03f05c8d7715dc41d79">SX1276_RST</a>&#160;&#160;&#160;12</td></tr>
<tr class="separator:ae3fdfec46955b03f05c8d7715dc41d79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a839015d97f9441df848f67d41570cf90" id="r_a839015d97f9441df848f67d41570cf90"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a839015d97f9441df848f67d41570cf90">SX1276_DIO0</a>&#160;&#160;&#160;32</td></tr>
<tr class="separator:a839015d97f9441df848f67d41570cf90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1787bdfd224acaec2e10ddaf2b153b7a" id="r_a1787bdfd224acaec2e10ddaf2b153b7a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1787bdfd224acaec2e10ddaf2b153b7a">SX1276_DIO1</a>&#160;&#160;&#160;13</td></tr>
<tr class="separator:a1787bdfd224acaec2e10ddaf2b153b7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5a2a6547b00c3425dd0d71bfa2800886" id="r_a5a2a6547b00c3425dd0d71bfa2800886"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5a2a6547b00c3425dd0d71bfa2800886">loraWAN_test</a> ()</td></tr>
<tr class="separator:a5a2a6547b00c3425dd0d71bfa2800886"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab42efec0e8860ab768280a3d778b4c0e" id="r_ab42efec0e8860ab768280a3d778b4c0e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab42efec0e8860ab768280a3d778b4c0e">do_send</a> (osjob_t *j)</td></tr>
<tr class="memdesc:ab42efec0e8860ab768280a3d778b4c0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends data using the LoRaWAN protocol.  <br /></td></tr>
<tr class="separator:ab42efec0e8860ab768280a3d778b4c0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaead836f5e0f65f5906b7ce269e92436" id="r_aaead836f5e0f65f5906b7ce269e92436"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaead836f5e0f65f5906b7ce269e92436">onEvent</a> (ev_t ev)</td></tr>
<tr class="memdesc:aaead836f5e0f65f5906b7ce269e92436"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event handler for LoRa events.  <br /></td></tr>
<tr class="separator:aaead836f5e0f65f5906b7ce269e92436"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecd1cc93051898c3777cb135c6f7baeb" id="r_aecd1cc93051898c3777cb135c6f7baeb"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aecd1cc93051898c3777cb135c6f7baeb">Lineprocessing</a> (const String &amp;line, uint8_t *data)</td></tr>
<tr class="separator:aecd1cc93051898c3777cb135c6f7baeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a518c053fc83e3afad95a7eb888108e66" id="r_a518c053fc83e3afad95a7eb888108e66"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a518c053fc83e3afad95a7eb888108e66">sendDataFromFile</a> (const char *filename)</td></tr>
<tr class="memdesc:a518c053fc83e3afad95a7eb888108e66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends data from a specified file over LoRa.  <br /></td></tr>
<tr class="separator:a518c053fc83e3afad95a7eb888108e66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b87e6c24b58790f84babe4f50e2cf48" id="r_a8b87e6c24b58790f84babe4f50e2cf48"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8b87e6c24b58790f84babe4f50e2cf48">saveLastPosition</a> (unsigned long position)</td></tr>
<tr class="memdesc:a8b87e6c24b58790f84babe4f50e2cf48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves the last position to persistent storage.  <br /></td></tr>
<tr class="separator:a8b87e6c24b58790f84babe4f50e2cf48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7595540527b820ae0c64023481d60c8" id="r_ad7595540527b820ae0c64023481d60c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad7595540527b820ae0c64023481d60c8">readLastPosition</a> ()</td></tr>
<tr class="memdesc:ad7595540527b820ae0c64023481d60c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the last saved position from preferences.  <br /></td></tr>
<tr class="separator:ad7595540527b820ae0c64023481d60c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70f58dcb5b0adb04adcb7cb1115d4f99" id="r_a70f58dcb5b0adb04adcb7cb1115d4f99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a70f58dcb5b0adb04adcb7cb1115d4f99">loraWAN_config_and_transmition</a> ()</td></tr>
<tr class="memdesc:a70f58dcb5b0adb04adcb7cb1115d4f99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures and initiates the LoRaWAN transmission.  <br /></td></tr>
<tr class="separator:a70f58dcb5b0adb04adcb7cb1115d4f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa77586c54009a37ee5ea1b088db21fe1" id="r_aa77586c54009a37ee5ea1b088db21fe1"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa77586c54009a37ee5ea1b088db21fe1">data_processing</a> (const char *filename, uint8_t *data)</td></tr>
<tr class="memdesc:aa77586c54009a37ee5ea1b088db21fe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes data from a file and calculates the average temperature.  <br /></td></tr>
<tr class="separator:aa77586c54009a37ee5ea1b088db21fe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae896ade8de020eddf38adba829f22445" id="r_ae896ade8de020eddf38adba829f22445"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae896ade8de020eddf38adba829f22445">loraWANActive</a></td></tr>
<tr class="separator:ae896ade8de020eddf38adba829f22445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ea06cf7b8092a0adaf07614d7ece59d" id="r_a6ea06cf7b8092a0adaf07614d7ece59d"><td class="memItemLeft" align="right" valign="top">Preferences&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6ea06cf7b8092a0adaf07614d7ece59d">preferences</a></td></tr>
<tr class="separator:a6ea06cf7b8092a0adaf07614d7ece59d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a839015d97f9441df848f67d41570cf90" name="a839015d97f9441df848f67d41570cf90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a839015d97f9441df848f67d41570cf90">&#9670;&#160;</a></span>SX1276_DIO0</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SX1276_DIO0&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1787bdfd224acaec2e10ddaf2b153b7a" name="a1787bdfd224acaec2e10ddaf2b153b7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1787bdfd224acaec2e10ddaf2b153b7a">&#9670;&#160;</a></span>SX1276_DIO1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SX1276_DIO1&#160;&#160;&#160;13</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6269695994a5fab5a4d1690236bd39fb" name="a6269695994a5fab5a4d1690236bd39fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6269695994a5fab5a4d1690236bd39fb">&#9670;&#160;</a></span>SX1276_MISO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SX1276_MISO&#160;&#160;&#160;19</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6bc86392a25db464812400b2cda0bc63" name="a6bc86392a25db464812400b2cda0bc63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bc86392a25db464812400b2cda0bc63">&#9670;&#160;</a></span>SX1276_MOSI</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SX1276_MOSI&#160;&#160;&#160;23</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a90e2250233b92babc91add8daf5e27b2" name="a90e2250233b92babc91add8daf5e27b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90e2250233b92babc91add8daf5e27b2">&#9670;&#160;</a></span>SX1276_NSS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SX1276_NSS&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae3fdfec46955b03f05c8d7715dc41d79" name="ae3fdfec46955b03f05c8d7715dc41d79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3fdfec46955b03f05c8d7715dc41d79">&#9670;&#160;</a></span>SX1276_RST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SX1276_RST&#160;&#160;&#160;12</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1725019f88d51fe88d3708c63927939e" name="a1725019f88d51fe88d3708c63927939e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1725019f88d51fe88d3708c63927939e">&#9670;&#160;</a></span>SX1276_SCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SX1276_SCK&#160;&#160;&#160;18</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa77586c54009a37ee5ea1b088db21fe1" name="aa77586c54009a37ee5ea1b088db21fe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa77586c54009a37ee5ea1b088db21fe1">&#9670;&#160;</a></span>data_processing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t data_processing </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes data from a file and calculates the average temperature. </p>
<p>This function reads data from the specified file starting from the last read position, calculates the average temperature from the data, and processes the last line of data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The name of the file to read data from. </td></tr>
    <tr><td class="paramname">data</td><td>A pointer to a buffer where processed data will be stored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The size of the processed data. </dd></dl>

</div>
</div>
<a id="ab42efec0e8860ab768280a3d778b4c0e" name="ab42efec0e8860ab768280a3d778b4c0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab42efec0e8860ab768280a3d778b4c0e">&#9670;&#160;</a></span>do_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_send </td>
          <td>(</td>
          <td class="paramtype">osjob_t *</td>          <td class="paramname"><span class="paramname"><em>j</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends data using the LoRaWAN protocol. </p>
<p>This function checks if there is a current TX/RX job running. If there is no ongoing transmission or reception, it prepares an upstream data transmission at the next possible time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">j</td><td>Pointer to the osjob_t structure representing the job to be executed.</td></tr>
  </table>
  </dd>
</dl>
<p>The function performs the following actions:</p><ul>
<li>If a TX/RX job is currently running, it logs a message indicating that the transmission is pending and does not send data.</li>
<li>If no TX/RX job is running, it queues a packet for transmission and logs a message indicating that the packet has been queued.</li>
</ul>
<p>The next transmission is scheduled after the TX_COMPLETE event. </p>

</div>
</div>
<a id="aecd1cc93051898c3777cb135c6f7baeb" name="aecd1cc93051898c3777cb135c6f7baeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecd1cc93051898c3777cb135c6f7baeb">&#9670;&#160;</a></span>Lineprocessing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t Lineprocessing </td>
          <td>(</td>
          <td class="paramtype">const String &amp;</td>          <td class="paramname"><span class="paramname"><em>line</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a70f58dcb5b0adb04adcb7cb1115d4f99" name="a70f58dcb5b0adb04adcb7cb1115d4f99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70f58dcb5b0adb04adcb7cb1115d4f99">&#9670;&#160;</a></span>loraWAN_config_and_transmition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loraWAN_config_and_transmition </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures and initiates the LoRaWAN transmission. </p>
<p>This function initializes the LoRaWAN stack, sets up the session keys, configures the channels, and sends data from a specified file.</p>
<dl class="section note"><dt>Note</dt><dd>The debug print statements are included for development purposes and should be removed in the final version.</dd></dl>
<p>The function performs the following steps:</p><ul>
<li>Initializes the LoRaWAN stack.</li>
<li>Resets the LMIC (LoRaMAC-in-C) library.</li>
<li>Sets up the session keys for communication.</li>
<li>Configures the channels based on the region (e.g., CFG_au915).</li>
<li>Disables link check mode.</li>
<li>Sets the data rate and transmission power.</li>
<li>Sends data from the specified file.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

</div>
</div>
<a id="a5a2a6547b00c3425dd0d71bfa2800886" name="a5a2a6547b00c3425dd0d71bfa2800886"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a2a6547b00c3425dd0d71bfa2800886">&#9670;&#160;</a></span>loraWAN_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loraWAN_test </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aaead836f5e0f65f5906b7ce269e92436" name="aaead836f5e0f65f5906b7ce269e92436"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaead836f5e0f65f5906b7ce269e92436">&#9670;&#160;</a></span>onEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void onEvent </td>
          <td>(</td>
          <td class="paramtype">ev_t</td>          <td class="paramname"><span class="paramname"><em>ev</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Event handler for LoRa events. </p>
<p>This function is called whenever a LoRa event occurs. It prints the event time and type to the serial monitor and handles specific events accordingly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ev</td><td>The event type (ev_t) that occurred.</td></tr>
  </table>
  </dd>
</dl>
<p>Event types handled:</p><ul>
<li>EV_TXSTART: Transmission started.</li>
<li>EV_SCAN_TIMEOUT: Scan timed out.</li>
<li>EV_BEACON_FOUND: Beacon found.</li>
<li>EV_BEACON_MISSED: Beacon missed.</li>
<li>EV_BEACON_TRACKED: Beacon tracked.</li>
<li>EV_JOINING: Joining network.</li>
<li>EV_JOINED: Joined network.</li>
<li>EV_RFU1: Reserved for future use.</li>
<li>EV_JOIN_FAILED: Joining network failed.</li>
<li>EV_REJOIN_FAILED: Rejoining network failed.</li>
<li>EV_TXCOMPLETE: Transmission complete (includes waiting for RX windows).</li>
<li>EV_LOST_TSYNC: Lost time synchronization.</li>
<li>EV_RESET: Reset event.</li>
<li>EV_RXCOMPLETE: Data received in ping slot.</li>
<li>EV_LINK_DEAD: Link dead.</li>
<li>EV_LINK_ALIVE: Link alive.</li>
<li>Default: Unknown event. </li>
</ul>

</div>
</div>
<a id="ad7595540527b820ae0c64023481d60c8" name="ad7595540527b820ae0c64023481d60c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7595540527b820ae0c64023481d60c8">&#9670;&#160;</a></span>readLastPosition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void readLastPosition </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the last saved position from preferences. </p>
<p>This function initializes the preferences with the namespace "last_line" and retrieves the integer value associated with the key "last_line". If the key does not exist, it defaults to 0. </p>

</div>
</div>
<a id="a8b87e6c24b58790f84babe4f50e2cf48" name="a8b87e6c24b58790f84babe4f50e2cf48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b87e6c24b58790f84babe4f50e2cf48">&#9670;&#160;</a></span>saveLastPosition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void saveLastPosition </td>
          <td>(</td>
          <td class="paramtype">unsigned long</td>          <td class="paramname"><span class="paramname"><em>position</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves the last position to persistent storage. </p>
<p>This function stores the given position value in a persistent storage using the preferences API. The position is saved under the key "last_line".</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">position</td><td>The position value to be saved. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a518c053fc83e3afad95a7eb888108e66" name="a518c053fc83e3afad95a7eb888108e66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a518c053fc83e3afad95a7eb888108e66">&#9670;&#160;</a></span>sendDataFromFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendDataFromFile </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends data from a specified file over LoRa. </p>
<p>This function initializes the SD card, opens the specified file, and reads data from it. If the file has been read before, it seeks to the last read position. If the next character in the file is a newline, the function puts the device to sleep. Otherwise, it processes the data and sends it using LoRa. The function waits until the transmission is complete before returning.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The name of the file to read data from. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ae896ade8de020eddf38adba829f22445" name="ae896ade8de020eddf38adba829f22445"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae896ade8de020eddf38adba829f22445">&#9670;&#160;</a></span>loraWANActive</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool loraWANActive</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6ea06cf7b8092a0adaf07614d7ece59d" name="a6ea06cf7b8092a0adaf07614d7ece59d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ea06cf7b8092a0adaf07614d7ece59d">&#9670;&#160;</a></span>preferences</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Preferences preferences</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="lora_8h.html">lora.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
